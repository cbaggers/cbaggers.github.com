<!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml"> <head> <meta charset="utf-8"> <title>Varjo</title> <link href="styles.css" rel="stylesheet" type="text/css"> </head> <body> <header> <h1>varjo</h1> <span class="version"></span> <p class="description">Common Lisp -&gt; GLSL Compiler</p> </header> <div id="content">  <article><h2>Varjo Reference Documentation</h2> <p>This is the documentation for the public api of Varjo. For the reference documentation for Vari (the language Varjo compiles to GLSL) please see <a href="">here</a></p> <blockquote> <p>WARNING: Much of this API still has unneccesarily inconsistant or misleading naming and is very subject to change.</p> </blockquote> </article>  <article>  <h2>Copyright</h2> <span>varjo</span> is licensed under the <span><a href="https://tldrlegal.com/search?q=BSD 2 Clause">BSD 2 Clause</a></span> license.  Â© <span>Chris Bagley (Baggers) &lt;techsnuffle@gmail.com&gt;</span> .    </article>  <article id="symbol-index"> <h2>Package Index</h2> <ul><li class="package" style="list-style-type: none"> <h3> <a name="VARJO.API" href="#VARJO.API">VARJO.API</a> <span class="nicknames"></span> </h3> <ul><li style="list-style-type: none"> <a name="VARJO.API:*DEFAULT-VERSION*"> </a> <article> <header class="special">  <h4 class="name"> <code> <a href="#VARJO.API%3A%2ADEFAULT-VERSION%2A">*DEFAULT-VERSION*</a> </code> </h4> <i class="type">special</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:*DEFAULT-VERSION*">*default-version*</a></code> is a variable that holds the version of GLSL that
will be used for a compile task if a version is not specified in the
context</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:*STAGE-NAMES*"> </a> <article> <header class="special">  <h4 class="name"> <code> <a href="#VARJO.API%3A%2ASTAGE-NAMES%2A">*STAGE-NAMES*</a> </code> </h4> <i class="type">special</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:*STAGE-NAMES*">*stage-names*</a></code> is a variable that holds the list of keyword stage names that
Varjo recognises</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:*STAGE-TYPE-NAMES*"> </a> <article> <header class="special">  <h4 class="name"> <code> <a href="#VARJO.API%3A%2ASTAGE-TYPE-NAMES%2A">*STAGE-TYPE-NAMES*</a> </code> </h4> <i class="type">special</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:*STAGE-TYPE-NAMES*">*stage-type-names*</a></code> is a variable that holds a list of type-names that map to
the stages named in <code><a href="#VARJO.API:*STAGE-NAMES*">*stage-names*</a></code></p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:*SUPPORTED-VERSIONS*"> </a> <article> <header class="special">  <h4 class="name"> <code> <a href="#VARJO.API%3A%2ASUPPORTED-VERSIONS%2A">*SUPPORTED-VERSIONS*</a> </code> </h4> <i class="type">special</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:*SUPPORTED-VERSIONS*">*supported-versions*</a></code> is a variable that holds the list of GLSL version Varjo
ostensibly supports.</p> <p>Note: That 'ostensibly' is there as I'm very sure that the lower levels of GLSL
varjo is currently doing a very poor job. If you have the time please file
issues that you find at https://github.com/cbaggers/varjo/issues</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:COMPILED-COMPUTE-STAGE"> </a> <article> <header class="class">  <h4 class="name"> <code> <a href="#VARJO.API%3ACOMPILED-COMPUTE-STAGE">COMPILED-COMPUTE-STAGE</a> </code> </h4> <i class="type">class</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:COMPILED-COMPUTE-STAGE">compiled-compute-stage</a></code> is a type which is used to respresent the compiled equivalent of <code><a href="#VARJO.API:COMPUTE-STAGE">compute-stage</a></code>. Along with the data stored for <code>stage</code> you can also query:</p> <ul> <li>The compiled glsl-code using the <code><a href="#VARJO.API:GLSL-CODE">glsl-code</a></code> function</li> <li>The <code>output-variable</code>s usings the <code><a href="#VARJO.API:OUTPUT-VARIABLES">output-variables</a></code> function</li> <li>The uniforms implicitly adding during compilation by calling the <code><a href="#VARJO.API:IMPLICIT-UNIFORMS">implicit-uniforms</a></code> function</li> <li>The <code>primitive</code> output from the stage by calling the <code><a href="#VARJO.API:PRIMITIVE-OUT">primitive-out</a></code> function</li> <li>The <code>external-function</code>s used from this stage by calling the <code>external-functions</code> function</li> </ul> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:COMPILED-FRAGMENT-STAGE"> </a> <article> <header class="class">  <h4 class="name"> <code> <a href="#VARJO.API%3ACOMPILED-FRAGMENT-STAGE">COMPILED-FRAGMENT-STAGE</a> </code> </h4> <i class="type">class</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:COMPILED-FRAGMENT-STAGE">compiled-fragment-stage</a></code> is a type which is used to respresent the compiled equivalent of <code><a href="#VARJO.API:FRAGMENT-STAGE">fragment-stage</a></code>. Along with the data stored for <code>stage</code> you can also query:</p> <ul> <li>The compiled glsl-code using the <code><a href="#VARJO.API:GLSL-CODE">glsl-code</a></code> function</li> <li>The <code>output-variable</code>s usings the <code><a href="#VARJO.API:OUTPUT-VARIABLES">output-variables</a></code> function</li> <li>The uniforms implicitly adding during compilation by calling the <code><a href="#VARJO.API:IMPLICIT-UNIFORMS">implicit-uniforms</a></code> function</li> <li>The <code>primitive</code> output from the stage by calling the <code><a href="#VARJO.API:PRIMITIVE-OUT">primitive-out</a></code> function</li> <li>The <code>external-function</code>s used from this stage by calling the <code>external-functions</code> function</li> </ul> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:COMPILED-GEOMETRY-STAGE"> </a> <article> <header class="class">  <h4 class="name"> <code> <a href="#VARJO.API%3ACOMPILED-GEOMETRY-STAGE">COMPILED-GEOMETRY-STAGE</a> </code> </h4> <i class="type">class</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:COMPILED-GEOMETRY-STAGE">compiled-geometry-stage</a></code> is a type which is used to respresent the compiled equivalent of <code><a href="#VARJO.API:GEOMETRY-STAGE">geometry-stage</a></code>. Along with the data stored for <code>stage</code> you can also query:</p> <ul> <li>The compiled glsl-code using the <code><a href="#VARJO.API:GLSL-CODE">glsl-code</a></code> function</li> <li>The <code>output-variable</code>s usings the <code><a href="#VARJO.API:OUTPUT-VARIABLES">output-variables</a></code> function</li> <li>The uniforms implicitly adding during compilation by calling the <code><a href="#VARJO.API:IMPLICIT-UNIFORMS">implicit-uniforms</a></code> function</li> <li>The <code>primitive</code> output from the stage by calling the <code><a href="#VARJO.API:PRIMITIVE-OUT">primitive-out</a></code> function</li> <li>The <code>external-function</code>s used from this stage by calling the <code>external-functions</code> function</li> </ul> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:COMPILED-STAGE"> </a> <article> <header class="class">  <h4 class="name"> <code> <a href="#VARJO.API%3ACOMPILED-STAGE">COMPILED-STAGE</a> </code> </h4> <i class="type">class</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:COMPILED-STAGE">compiled-stage</a></code> is a type which is used to respresent the compiled equivalent of. Along with the data stored for <code>stage</code> you can also query:</p> <ul> <li>The compiled glsl-code using the <code><a href="#VARJO.API:GLSL-CODE">glsl-code</a></code> function</li> <li>The <code>output-variable</code>s usings the <code><a href="#VARJO.API:OUTPUT-VARIABLES">output-variables</a></code> function</li> <li>The uniforms implicitly adding during compilation by calling the <code><a href="#VARJO.API:IMPLICIT-UNIFORMS">implicit-uniforms</a></code> function</li> <li>The <code>primitive</code> output from the stage by calling the <code><a href="#VARJO.API:PRIMITIVE-OUT">primitive-out</a></code> function</li> <li>The <code>external-function</code>s used from this stage by calling the <code>external-functions</code> function</li> </ul> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:COMPILED-TESSELLATION-CONTROL-STAGE"> </a> <article> <header class="class">  <h4 class="name"> <code> <a href="#VARJO.API%3ACOMPILED-TESSELLATION-CONTROL-STAGE">COMPILED-TESSELLATION-CONTROL-STAGE</a> </code> </h4> <i class="type">class</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:COMPILED-TESSELLATION-CONTROL-STAGE">compiled-tessellation-control-stage</a></code> is a type which is used to respresent the compiled equivalent of <code><a href="#VARJO.API:TESSELLATION-CONTROL-STAGE">tessellation-control-stage</a></code>. Along with the data stored for <code>stage</code> you can also query:</p> <ul> <li>The compiled glsl-code using the <code><a href="#VARJO.API:GLSL-CODE">glsl-code</a></code> function</li> <li>The <code>output-variable</code>s usings the <code><a href="#VARJO.API:OUTPUT-VARIABLES">output-variables</a></code> function</li> <li>The uniforms implicitly adding during compilation by calling the <code><a href="#VARJO.API:IMPLICIT-UNIFORMS">implicit-uniforms</a></code> function</li> <li>The <code>primitive</code> output from the stage by calling the <code><a href="#VARJO.API:PRIMITIVE-OUT">primitive-out</a></code> function</li> <li>The <code>external-function</code>s used from this stage by calling the <code>external-functions</code> function</li> </ul> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:COMPILED-TESSELLATION-EVALUATION-STAGE"> </a> <article> <header class="class">  <h4 class="name"> <code> <a href="#VARJO.API%3ACOMPILED-TESSELLATION-EVALUATION-STAGE">COMPILED-TESSELLATION-EVALUATION-STAGE</a> </code> </h4> <i class="type">class</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:COMPILED-TESSELLATION-EVALUATION-STAGE">compiled-tessellation-evaluation-stage</a></code> is a type which is used to respresent the compiled equivalent of <code><a href="#VARJO.API:TESSELLATION-EVALUATION-STAGE">tessellation-evaluation-stage</a></code>. Along with the data stored for <code>stage</code> you can also query:</p> <ul> <li>The compiled glsl-code using the <code><a href="#VARJO.API:GLSL-CODE">glsl-code</a></code> function</li> <li>The <code>output-variable</code>s usings the <code><a href="#VARJO.API:OUTPUT-VARIABLES">output-variables</a></code> function</li> <li>The uniforms implicitly adding during compilation by calling the <code><a href="#VARJO.API:IMPLICIT-UNIFORMS">implicit-uniforms</a></code> function</li> <li>The <code>primitive</code> output from the stage by calling the <code><a href="#VARJO.API:PRIMITIVE-OUT">primitive-out</a></code> function</li> <li>The <code>external-function</code>s used from this stage by calling the <code>external-functions</code> function</li> </ul> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:COMPILED-VERTEX-STAGE"> </a> <article> <header class="class">  <h4 class="name"> <code> <a href="#VARJO.API%3ACOMPILED-VERTEX-STAGE">COMPILED-VERTEX-STAGE</a> </code> </h4> <i class="type">class</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:COMPILED-VERTEX-STAGE">compiled-vertex-stage</a></code> is a type which is used to respresent the compiled equivalent of <code><a href="#VARJO.API:VERTEX-STAGE">vertex-stage</a></code>. Along with the data stored for <code>stage</code> you can also query:</p> <ul> <li>The compiled glsl-code using the <code><a href="#VARJO.API:GLSL-CODE">glsl-code</a></code> function</li> <li>The <code>output-variable</code>s usings the <code><a href="#VARJO.API:OUTPUT-VARIABLES">output-variables</a></code> function</li> <li>The uniforms implicitly adding during compilation by calling the <code><a href="#VARJO.API:IMPLICIT-UNIFORMS">implicit-uniforms</a></code> function</li> <li>The <code>primitive</code> output from the stage by calling the <code><a href="#VARJO.API:PRIMITIVE-OUT">primitive-out</a></code> function</li> <li>The <code>external-function</code>s used from this stage by calling the <code>external-functions</code> function</li> </ul> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:COMPUTE-STAGE"> </a> <article> <header class="class">  <h4 class="name"> <code> <a href="#VARJO.API%3ACOMPUTE-STAGE">COMPUTE-STAGE</a> </code> </h4> <i class="type">class</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:COMPUTE-STAGE">compute-stage</a></code> is the class that represents a uncompiled compute stage</p> <p><code><a href="#VARJO.API:COMPILED-COMPUTE-STAGE">compiled-compute-stage</a></code> inherits from this class</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:DYNAMIC"> </a> <article> <header class="class">  <h4 class="name"> <code> <a href="#VARJO.API%3ADYNAMIC">DYNAMIC</a> </code> </h4> <i class="type">class</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:DYNAMIC">dynamic</a></code> is the class that represents the simarlaly
named GL primitive.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:FEEDBACK-QUALIFIER"> </a> <article> <header class="class">  <h4 class="name"> <code> <a href="#VARJO.API%3AFEEDBACK-QUALIFIER">FEEDBACK-QUALIFIER</a> </code> </h4> <i class="type">class</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:FEEDBACK-QUALIFIER">feedback-qualifier</a></code> is the class that holds data specified in a transform-
feedback qualifier.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:FRAGMENT-STAGE"> </a> <article> <header class="class">  <h4 class="name"> <code> <a href="#VARJO.API%3AFRAGMENT-STAGE">FRAGMENT-STAGE</a> </code> </h4> <i class="type">class</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:FRAGMENT-STAGE">fragment-stage</a></code> is the class that represents a uncompiled fragment stage.</p> <p><code><a href="#VARJO.API:COMPILED-FRAGMENT-STAGE">compiled-fragment-stage</a></code> inherits from this class</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:GEOMETRY-STAGE"> </a> <article> <header class="class">  <h4 class="name"> <code> <a href="#VARJO.API%3AGEOMETRY-STAGE">GEOMETRY-STAGE</a> </code> </h4> <i class="type">class</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:GEOMETRY-STAGE">geometry-stage</a></code> is the class that represents a uncompiled geometry stage.</p> <p><code><a href="#VARJO.API:COMPILED-GEOMETRY-STAGE">compiled-geometry-stage</a></code> inherits from this class</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:IMPLICIT-UNIFORM-VARIABLE"> </a> <article> <header class="class">  <h4 class="name"> <code> <a href="#VARJO.API%3AIMPLICIT-UNIFORM-VARIABLE">IMPLICIT-UNIFORM-VARIABLE</a> </code> </h4> <i class="type">class</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:IMPLICIT-UNIFORM-VARIABLE">implicit-uniform-variable</a></code> is a class which holds data about the uniforms that added
implicitly (whether by globally scoped variable capture or by use of <code><a href="#VARJO.API:ADD-LISP-FORM-AS-UNIFORM">add-lisp-form-as-uniform</a></code>)</p> <p>You can call the following functions on it to retrieve the data:</p> <ul> <li><code><a href="#VARJO.API:NAME">name</a></code></li> <li><code><a href="#VARJO.API:V-TYPE-OF">v-type-of</a></code></li> <li><code><a href="#VARJO.API:GLSL-NAME">glsl-name</a></code></li> </ul> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:INPUT-VARIABLE"> </a> <article> <header class="class">  <h4 class="name"> <code> <a href="#VARJO.API%3AINPUT-VARIABLE">INPUT-VARIABLE</a> </code> </h4> <i class="type">class</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:INPUT-VARIABLE">input-variable</a></code> is a class which holds data about the input parameters to the stage</p> <p>You can call the following functions on it to retrieve the data:</p> <ul> <li><code><a href="#VARJO.API:NAME">name</a></code></li> <li><code><a href="#VARJO.API:V-TYPE-OF">v-type-of</a></code></li> <li><code><a href="#VARJO.API:GLSL-NAME">glsl-name</a></code></li> </ul> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:LINE-LOOP"> </a> <article> <header class="class">  <h4 class="name"> <code> <a href="#VARJO.API%3ALINE-LOOP">LINE-LOOP</a> </code> </h4> <i class="type">class</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:LINE-LOOP">line-loop</a></code> is the class that represents the simarlaly
named GL primitive.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:LINE-STRIP"> </a> <article> <header class="class">  <h4 class="name"> <code> <a href="#VARJO.API%3ALINE-STRIP">LINE-STRIP</a> </code> </h4> <i class="type">class</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:LINE-STRIP">line-strip</a></code> is the class that represents the simarlaly
named GL primitive.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:LINE-STRIP-ADJACENCY"> </a> <article> <header class="class">  <h4 class="name"> <code> <a href="#VARJO.API%3ALINE-STRIP-ADJACENCY">LINE-STRIP-ADJACENCY</a> </code> </h4> <i class="type">class</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:LINE-STRIP-ADJACENCY">line-strip-adjacency</a></code> is the class that represents the simarlaly
named GL primitive.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:LINES"> </a> <article> <header class="class">  <h4 class="name"> <code> <a href="#VARJO.API%3ALINES">LINES</a> </code> </h4> <i class="type">class</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:LINES">lines</a></code> is the class that represents the simarlaly
named GL primitive.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:LINES-ADJACENCY"> </a> <article> <header class="class">  <h4 class="name"> <code> <a href="#VARJO.API%3ALINES-ADJACENCY">LINES-ADJACENCY</a> </code> </h4> <i class="type">class</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:LINES-ADJACENCY">lines-adjacency</a></code> is the class that represents the similarly
named GL primitive.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:PATCHES"> </a> <article> <header class="class">  <h4 class="name"> <code> <a href="#VARJO.API%3APATCHES">PATCHES</a> </code> </h4> <i class="type">class</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:PATCHES">patches</a></code> is the class that represents the similarly
named GL primitive.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:POINTS"> </a> <article> <header class="class">  <h4 class="name"> <code> <a href="#VARJO.API%3APOINTS">POINTS</a> </code> </h4> <i class="type">class</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:POINTS">points</a></code> is the class that represents the similarly
named GL primitive.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:QUADS"> </a> <article> <header class="class">  <h4 class="name"> <code> <a href="#VARJO.API%3AQUADS">QUADS</a> </code> </h4> <i class="type">class</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:QUADS">quads</a></code> is the class that represents the similarly
named GL primitive.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:QUALIFIER"> </a> <article> <header class="class">  <h4 class="name"> <code> <a href="#VARJO.API%3AQUALIFIER">QUALIFIER</a> </code> </h4> <i class="type">class</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:QUALIFIER">qualifier</a></code> is the class that other classes subclass in order to represent
various GLSL qualifiers.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:SHADER-VARIABLE"> </a> <article> <header class="class">  <h4 class="name"> <code> <a href="#VARJO.API%3ASHADER-VARIABLE">SHADER-VARIABLE</a> </code> </h4> <i class="type">class</i>  </header> <div class="docstring"><p>This class is the superclass of input-variable, uniform-variable and
output-variable.</p> <p>You can call the following functions on it to retrieve the data:</p> <ul> <li><code><a href="#VARJO.API:NAME">name</a></code></li> <li><code><a href="#VARJO.API:V-TYPE-OF">v-type-of</a></code></li> <li><code><a href="#VARJO.API:GLSL-NAME">glsl-name</a></code></li> </ul> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:TESSELLATION-CONTROL-STAGE"> </a> <article> <header class="class">  <h4 class="name"> <code> <a href="#VARJO.API%3ATESSELLATION-CONTROL-STAGE">TESSELLATION-CONTROL-STAGE</a> </code> </h4> <i class="type">class</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:TESSELLATION-CONTROL-STAGE">tessellation-control-stage</a></code> is the class that represents a uncompiled
tessellation-control stage.</p> <p><code><a href="#VARJO.API:COMPILED-TESSELLATION-CONTROL-STAGE">compiled-tessellation-control-stage</a></code> inherits from this class</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:TESSELLATION-EVALUATION-STAGE"> </a> <article> <header class="class">  <h4 class="name"> <code> <a href="#VARJO.API%3ATESSELLATION-EVALUATION-STAGE">TESSELLATION-EVALUATION-STAGE</a> </code> </h4> <i class="type">class</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:TESSELLATION-EVALUATION-STAGE">tessellation-evaluation-stage</a></code> is the class that represents a uncompiled
tessellation-evaluation stage.</p> <p><code><a href="#VARJO.API:COMPILED-TESSELLATION-EVALUATION-STAGE">compiled-tessellation-evaluation-stage</a></code> inherits from this class</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:TRIANGLE-FAN"> </a> <article> <header class="class">  <h4 class="name"> <code> <a href="#VARJO.API%3ATRIANGLE-FAN">TRIANGLE-FAN</a> </code> </h4> <i class="type">class</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:TRIANGLE-FAN">triangle-fan</a></code> is the class that represents the similarly
named GL primitive.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:TRIANGLE-STRIP"> </a> <article> <header class="class">  <h4 class="name"> <code> <a href="#VARJO.API%3ATRIANGLE-STRIP">TRIANGLE-STRIP</a> </code> </h4> <i class="type">class</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:TRIANGLE-STRIP">triangle-strip</a></code> is the class that represents the similarly
named GL primitive.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:TRIANGLE-STRIP-ADJACENCY"> </a> <article> <header class="class">  <h4 class="name"> <code> <a href="#VARJO.API%3ATRIANGLE-STRIP-ADJACENCY">TRIANGLE-STRIP-ADJACENCY</a> </code> </h4> <i class="type">class</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:TRIANGLE-STRIP-ADJACENCY">triangle-strip-adjacency</a></code> is the class that represents the similarly
named GL primitive.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:TRIANGLES"> </a> <article> <header class="class">  <h4 class="name"> <code> <a href="#VARJO.API%3ATRIANGLES">TRIANGLES</a> </code> </h4> <i class="type">class</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:TRIANGLES">triangles</a></code> is the class that represents the similarly
named GL primitive.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:TRIANGLES-ADJACENCY"> </a> <article> <header class="class">  <h4 class="name"> <code> <a href="#VARJO.API%3ATRIANGLES-ADJACENCY">TRIANGLES-ADJACENCY</a> </code> </h4> <i class="type">class</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:TRIANGLES-ADJACENCY">triangles-adjacency</a></code> is the class that represents the similarly
named GL primitive.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:UNIFORM-VARIABLE"> </a> <article> <header class="class">  <h4 class="name"> <code> <a href="#VARJO.API%3AUNIFORM-VARIABLE">UNIFORM-VARIABLE</a> </code> </h4> <i class="type">class</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:UNIFORM-VARIABLE">uniform-variable</a></code> is a class which holds data about the uniform parameters to the stage</p> <p>You can call the following functions on it to retrieve the data:</p> <ul> <li><code><a href="#VARJO.API:NAME">name</a></code></li> <li><code><a href="#VARJO.API:V-TYPE-OF">v-type-of</a></code></li> <li><code><a href="#VARJO.API:GLSL-NAME">glsl-name</a></code></li> </ul> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:VERTEX-STAGE"> </a> <article> <header class="class">  <h4 class="name"> <code> <a href="#VARJO.API%3AVERTEX-STAGE">VERTEX-STAGE</a> </code> </h4> <i class="type">class</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:VERTEX-STAGE">vertex-stage</a></code> is the class that represents a uncompiled vertex stage.</p> <p><code><a href="#VARJO.API:COMPILED-VERTEX-STAGE">compiled-vertex-stage</a></code> inherits from this class</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:CONTEXT"> </a> <article> <header class="accessor">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3ACONTEXT">CONTEXT</a> </code> <code class="qualifiers"></code> <code class="arguments">OBJECT</code> <code>)</code> </h4> <i class="type">accessor</i>  </header> <div class="docstring"><p>When passed an instance of <code>stage</code> this function returns a list of
GLSL versions which this stage was/is to be compiled with</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:GLSL-CODE"> </a> <article> <header class="accessor">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AGLSL-CODE">GLSL-CODE</a> </code> <code class="qualifiers"></code> <code class="arguments">OBJECT</code> <code>)</code> </h4> <i class="type">accessor</i>  </header> <div class="docstring"><p>When passed an instance of <code><a href="#VARJO.API:COMPILED-STAGE">compiled-stage</a></code> this function returns a string
containing the glsl code that resulted from the compilation.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:GLSL-NAME"> </a> <article> <header class="accessor">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AGLSL-NAME">GLSL-NAME</a> </code> <code class="qualifiers"></code> <code class="arguments">OBJECT</code> <code>)</code> </h4> <i class="type">accessor</i>  </header> <div class="docstring"><p>When passed an instance of <code><a href="#VARJO.API:SHADER-VARIABLE">shader-variable</a></code> this function returns a string
containing the name that the variable was given in the glsl code.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:IMPLICIT-UNIFORMS"> </a> <article> <header class="accessor">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AIMPLICIT-UNIFORMS">IMPLICIT-UNIFORMS</a> </code> <code class="qualifiers"></code> <code class="arguments">OBJECT</code> <code>)</code> </h4> <i class="type">accessor</i>  </header> <div class="docstring"><p>When passed an instance of <code><a href="#VARJO.API:COMPILED-STAGE">compiled-stage</a></code> this function returns a list
of instances of <code><a href="#VARJO.API:IMPLICIT-UNIFORM-VARIABLE">implicit-uniform-variable</a></code> which represent the uniforms
which were added implicitly during the compilation of the given stage.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:INPUT-VARIABLES"> </a> <article> <header class="accessor">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AINPUT-VARIABLES">INPUT-VARIABLES</a> </code> <code class="qualifiers"></code> <code class="arguments">OBJECT</code> <code>)</code> </h4> <i class="type">accessor</i>  </header> <div class="docstring"><p>When passed an instance of <code>stage</code> this function returns a list of <code><a href="#VARJO.API:INPUT-VARIABLE">input-variable</a></code> objects which respresent the input paramaters to
the stage</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:LISP-CODE"> </a> <article> <header class="accessor">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3ALISP-CODE">LISP-CODE</a> </code> <code class="qualifiers"></code> <code class="arguments">OBJECT</code> <code>)</code> </h4> <i class="type">accessor</i>  </header> <div class="docstring"><p>When passed an instance of <code>stage</code>, <code><a href="#VARJO.API:LISP-CODE">lisp-code</a></code> returns the Vari code that
acts as the body of the stage.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:OUTPUT-VARIABLES"> </a> <article> <header class="accessor">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AOUTPUT-VARIABLES">OUTPUT-VARIABLES</a> </code> <code class="qualifiers"></code> <code class="arguments">OBJECT</code> <code>)</code> </h4> <i class="type">accessor</i>  </header> <div class="docstring"><p>When passed an instance of <code><a href="#VARJO.API:COMPILED-STAGE">compiled-stage</a></code> this function returns a list
of instances of <code>output-variable</code> which represent the data output from
the given stage.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:PRIMITIVE-IN"> </a> <article> <header class="accessor">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3APRIMITIVE-IN">PRIMITIVE-IN</a> </code> <code class="qualifiers"></code> <code class="arguments">PP</code> <code>)</code> </h4> <i class="type">accessor</i>  </header> <div class="docstring"><p>When passed an instance of <code>stage</code> this function returns an instance of <code>primitive</code> or nil.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:PRIMITIVE-OUT"> </a> <article> <header class="accessor">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3APRIMITIVE-OUT">PRIMITIVE-OUT</a> </code> <code class="qualifiers"></code> <code class="arguments">OBJECT</code> <code>)</code> </h4> <i class="type">accessor</i>  </header> <div class="docstring"><p>When passed an instance of <code><a href="#VARJO.API:COMPILED-STAGE">compiled-stage</a></code> this function returns either
NIL or an instance of 'primitive'. This represent the primitive that
could/was be passed to the next stage.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:STEMCELLS-ALLOWED"> </a> <article> <header class="accessor">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3ASTEMCELLS-ALLOWED">STEMCELLS-ALLOWED</a> </code> <code class="qualifiers"></code> <code class="arguments">OBJECT</code> <code>)</code> </h4> <i class="type">accessor</i>  </header> <div class="docstring"><p>When passed an instance of <code>stage</code> this function returns a <code>generalized-boolean</code></p> <p>If this argument is not NIL then the compiler will allow the capture
of globally scoped variables from Common Lisp and use of <code><a href="#VARJO.API:ADD-LISP-FORM-AS-UNIFORM">add-lisp-form-as-uniform</a></code> from within macros.</p> <p>For details on how to support 'global variable capture' please see the documentation
for <code><a href="#VARJO.API:WITH-STEMCELL-INFER-HOOK">with-stemcell-infer-hook</a></code> &amp; <code><a href="#VARJO.API:WITH-CONSTANT-INJECT-HOOK">with-constant-inject-hook</a></code></p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:UNIFORM-VARIABLES"> </a> <article> <header class="accessor">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AUNIFORM-VARIABLES">UNIFORM-VARIABLES</a> </code> <code class="qualifiers"></code> <code class="arguments">OBJECT</code> <code>)</code> </h4> <i class="type">accessor</i>  </header> <div class="docstring"><p>When passed an instance of <code>stage</code> this function returns a list of <code><a href="#VARJO.API:UNIFORM-VARIABLE">uniform-variable</a></code> objects which respresent the uniform paramaters to
the stage</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:USED-EXTERNAL-FUNCTIONS"> </a> <article> <header class="accessor">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AUSED-EXTERNAL-FUNCTIONS">USED-EXTERNAL-FUNCTIONS</a> </code> <code class="qualifiers"></code> <code class="arguments">E</code> <code>)</code> </h4> <i class="type">accessor</i>  </header> <div class="docstring"><p>When passed an instance of <code><a href="#VARJO.API:COMPILED-STAGE">compiled-stage</a></code> this function returns a list
of <code>external-function</code> objects which were used by the given stage.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:V-DIMENSIONS"> </a> <article> <header class="accessor">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AV-DIMENSIONS">V-DIMENSIONS</a> </code> <code class="qualifiers"></code> <code class="arguments">OBJECT</code> <code>)</code> </h4> <i class="type">accessor</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:V-DIMENSIONS">v-dimensions</a></code> given an instance of the <code>v-array</code> type object this returns the
list of it's dimensions.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:V-TYPE-OF"> </a> <article> <header class="accessor">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AV-TYPE-OF">V-TYPE-OF</a> </code> <code class="qualifiers"></code> <code class="arguments">FUNC</code> <code>)</code> </h4> <i class="type">accessor</i>  </header> <div class="docstring"><p>When called with an instance of <code><a href="#VARJO.API:SHADER-VARIABLE">shader-variable</a></code> this will return the
Varjo type object which represents the variables Vari type.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:ADD-ALTERNATE-TYPE-NAME"> </a> <article> <header class="function">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AADD-ALTERNATE-TYPE-NAME">ADD-ALTERNATE-TYPE-NAME</a> </code> <code class="qualifiers"></code> <code class="arguments">ALT-TYPE-NAME SRC-TYPE-NAME</code> <code>)</code> </h4> <i class="type">function</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:ADD-ALTERNATE-TYPE-NAME">add-alternate-type-name</a></code></p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:EPHEMERAL-P"> </a> <article> <header class="function">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AEPHEMERAL-P">EPHEMERAL-P</a> </code> <code class="qualifiers"></code> <code class="arguments">OBJ</code> <code>)</code> </h4> <i class="type">function</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:EPHEMERAL-P">ephemeral-p</a></code> returns T is the Varjo type object represents an <code>ephemeral</code> type</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:FIND-MUTUAL-CAST-TYPE"> </a> <article> <header class="function">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AFIND-MUTUAL-CAST-TYPE">FIND-MUTUAL-CAST-TYPE</a> </code> <code class="qualifiers"></code> <code class="arguments">&amp;REST TYPES</code> <code>)</code> </h4> <i class="type">function</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:FIND-MUTUAL-CAST-TYPE">find-mutual-cast-type</a></code> when given a number of Varjo type objects, this function
will return a type object that they can all mutually be cast to according to
GLSL's rules.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:MAKE-STAGE"> </a> <article> <header class="function">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AMAKE-STAGE">MAKE-STAGE</a> </code> <code class="qualifiers"></code> <code class="arguments">KIND IN-ARGS UNIFORMS CONTEXT CODE &amp;OPTIONAL (STEMCELLS-ALLOWED T) PRIMITIVE</code> <code>)</code> </h4> <i class="type">function</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:MAKE-STAGE">make-stage</a></code> is the function that create an object that can be passed to the <code><a href="#VARJO.API:TRANSLATE">translate</a></code> function. It takes the following arguments:</p> <h3>kind</h3> <p>This must be one of the keywords in <em>stage-names</em>:</p> <ul> <li>:vertex</li> <li>:tessellation-control</li> <li>:tessellation-evaluation</li> <li>:geometry</li> <li>:fragment</li> <li>:compute</li> </ul> <h3>in-args</h3> <p>Must be a list of input parameters to the stage. These are the values to which change
per element that is being processed, whether that be per vertex, fragment, patch,
instance, etc.</p> <p>The input variables are defined as lists in the following fashion:</p> <pre><code>(variable-name
 type-spec
 &amp;rest optional-qualifier-designators [&quot;explicit-glsl-name&quot;])
</code></pre> <p>Usually this looks like:</p> <pre><code>(vert :vec4)
(data lighting-data)
(<a href="http://l1sp.org/cl/length">length</a> :int :flat) &lt;- flat is the qualifier in this case
</code></pre> <p>If the last element of the list is a string, then that string is used as the name of the variable in the compiled GLSL. This is very rarely used and should generally be avoided.</p> <h3>uniforms</h3> <p>This is a list of the uniforms to stage. These are the values that stay the same (are
uniform) for the duration of the pipeline.</p> <p>They are defined in the same way as the above 'in-args' except that, if the type-spec
specified a struct type the following additional qualifiers are allowed:</p> <ul> <li><code>:ssbo</code></li> <li><code>:ubo</code></li> <li><code>:std-140</code></li> <li><code>:std-430</code></li> </ul> <p>The result of <code><a href="#VARJO.API:MAKE-STAGE">make-stage</a></code> is an instance of one of the subclasses of the <code>stage</code> type.</p> <h3>context</h3> <p>The context argument must be a list that may contain any number of symbols from <em>supported-versions</em>. Context is used to specify the GLSL version to compile the
stage.</p> <p>NOTE: The name 'context' is legacy at this point as it is only used to specify
GLSL versions.</p> <h3>code</h3> <p>This must be a list containing the forms that make up the 'body' of the stage.</p> <p>It is not legal for this argument to be nil.</p> <h3>stemcells-allowed (optional)</h3> <p>If this argument is not NIL then the compiler will allow the capture of globally
scoped variables from Common Lisp and use of <code><a href="#VARJO.API:ADD-LISP-FORM-AS-UNIFORM">add-lisp-form-as-uniform</a></code> from
within macros. For details on how to support 'global variable capture' please see
the documentation for <code><a href="#VARJO.API:WITH-STEMCELL-INFER-HOOK">with-stemcell-infer-hook</a></code> &amp; <code><a href="#VARJO.API:WITH-CONSTANT-INJECT-HOOK">with-constant-inject-hook</a></code></p> <h3>primitive (optional)</h3> <p>This can be nil, a instance of the type 'primitive or a valid 'primitive
designator' as specified by the <code><a href="#VARJO.API:VALID-PRIMITIVE-NAME-P">valid-primitive-name-p</a></code> function.</p> <p>Primitive designators are either one of the following keywords..</p> <ul> <li><code>:dynamic</code></li> <li><code>:points</code></li> <li><code>:lines</code></li> <li><code>:iso-lines</code></li> <li><code>:line-loop</code></li> <li><code>:line-strip</code></li> <li><code>:lines-adjacency</code></li> <li><code>:line-strip-adjacency</code></li> <li><code>:triangles</code></li> <li><code>:triangle-fan</code></li> <li><code>:triangle-strip</code></li> <li><code>:triangles-adjacency</code></li> <li><code>:triangle-strip-adjacency</code></li> <li><code>:quads</code></li> </ul> <p>.. or a list whos first element is <code>:patches</code> and the second (and final) element
is a positive integer that is greater than 1. This specifies the length of
the patch.</p> <p>Whilst this is optional in <code><a href="#VARJO.API:MAKE-STAGE">make-stage</a></code> it must be set before being passed to
translate if the stage kind is one of the following:</p> <ul> <li>tessellation-control-stage</li> <li>tessellation-evaluation-stage</li> <li>geometry-stage</li> </ul> <p><em>Or</em> if it the first stage in the list of stages passed to <code><a href="#VARJO.API:ROLLING-TRANSLATE">rolling-translate</a></code> and if some of the other stages are of the above kinds.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:MAKE-TYPE-SET"> </a> <article> <header class="function">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AMAKE-TYPE-SET">MAKE-TYPE-SET</a> </code> <code class="qualifiers"></code> <code class="arguments">&amp;REST MEMBERS</code> <code>)</code> </h4> <i class="type">function</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:MAKE-TYPE-SET">make-type-set</a></code> takes Varjo type objects or <code>type-spec</code>s and returns an objects
that respresents a set of types. <code>type-set</code>s are used by a number of internal
Varjo functions.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:ROLLING-TRANSLATE"> </a> <article> <header class="function">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AROLLING-TRANSLATE">ROLLING-TRANSLATE</a> </code> <code class="qualifiers"></code> <code class="arguments">STAGES &amp;OPTIONAL (COMPILE-FUNC (FUNCTION TRANSLATE))</code> <code>)</code> </h4> <i class="type">function</i>  </header> <div class="docstring"><p>When called with a list of <code>stage</code> objects, <code><a href="#VARJO.API:ROLLING-TRANSLATE">rolling-translate</a></code> compiles
them returning a list of <code><a href="#VARJO.API:COMPILED-STAGE">compiled-stage</a></code> objects.</p> <p><code><a href="#VARJO.API:ROLLING-TRANSLATE">rolling-translate</a></code> does not simply <code><a href="http://l1sp.org/cl/mapcar">mapcar</a></code> the list over <code><a href="#VARJO.API:TRANSLATE">translate</a></code> it
propegates information like the primitive and ensures that outputs of one
stage match up with the inputs of the next. This means that you only have
to specify the primitive on the vertex stage when compiling a whole
pipeline and any geometry/tessellation stages in the list will receive the
correct information.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:TEST-TRANSLATE-FUNCTION-SPLIT-DETAILS"> </a> <article> <header class="function">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3ATEST-TRANSLATE-FUNCTION-SPLIT-DETAILS">TEST-TRANSLATE-FUNCTION-SPLIT-DETAILS</a> </code> <code class="qualifiers"></code> <code class="arguments">NAME IN-ARGS UNIFORMS CONTEXT BODY &amp;OPTIONAL (STAGE-KINDS *STAGE-NAMES*)
 (ALLOW-STEMCELLS T)</code> <code>)</code> </h4> <i class="type">function</i>  </header> <div class="docstring"></div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:TYPE-SPECP"> </a> <article> <header class="function">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3ATYPE-SPECP">TYPE-SPECP</a> </code> <code class="qualifiers"></code> <code class="arguments">SPEC</code> <code>)</code> </h4> <i class="type">function</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:TYPE-SPECP">type-specp</a></code> returns T if the <code>type-spec</code> provided represents valid Vari type.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:V-COMPILE"> </a> <article> <header class="function">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AV-COMPILE">V-COMPILE</a> </code> <code class="qualifiers"></code> <code class="arguments">UNIFORMS VERSION &amp;KEY VERTEX TESSELLATION-CONTROL TESSELLATION-EVALUATION
 GEOMETRY FRAGMENT COMPUTE ALLOW-STEMCELLS DRAW-MODE (PRIMITIVE :TRIANGLES)</code> <code>)</code> </h4> <i class="type">function</i>  </header> <div class="docstring"><blockquote> <p>NOTE: It is the authors recommendation to use <code><a href="#VARJO.API:MAKE-STAGE">make-stage</a></code> &amp; <code><a href="#VARJO.API:TRANSLATE">translate</a></code> rather than this function</p> </blockquote> <p>This function takes lisp code as lists and returns the results of compiling
that code to glsl.</p> <p>Each result is an object of type 'compiled-stage.</p> <p>The stages must be defined in the following way.</p> <ul> <li>The first element of the list is the input args to the stage as pairs of
  names and types.</li> <li>The rest of the list is the body code of that stage.</li> </ul> <p>Example:</p> <pre><code>(<a href="#VARJO.API:V-COMPILE">v-compile</a> '((a :float)) :330
           :vertex '(((pos :vec3))
                     (<a href="http://l1sp.org/cl/values">values</a> (vec4 pos 1.0) a))
           :fragment '(((hmm :float))
                       (<a href="http://l1sp.org/cl/labels">labels</a> ((fun ((x :float))
                                  (<a href="http://l1sp.org/cl/*">*</a> x x)))
                         (vec4 1.0 1.0 hmm (fun a)))))
</code></pre> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:V-ERRORP"> </a> <article> <header class="function">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AV-ERRORP">V-ERRORP</a> </code> <code class="qualifiers"></code> <code class="arguments">OBJ</code> <code>)</code> </h4> <i class="type">function</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:V-ERRORP">v-errorp</a></code> returns T if the provided objects is of type <code>v-error</code></p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:VALID-PRIMITIVE-NAME-P"> </a> <article> <header class="function">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AVALID-PRIMITIVE-NAME-P">VALID-PRIMITIVE-NAME-P</a> </code> <code class="qualifiers"></code> <code class="arguments">NAME</code> <code>)</code> </h4> <i class="type">function</i>  </header> <div class="docstring"><i>No docstring provided.</i></div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:ADD-EQUIVALENT-NAME"> </a> <article> <header class="generic">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AADD-EQUIVALENT-NAME">ADD-EQUIVALENT-NAME</a> </code> <code class="qualifiers"></code> <code class="arguments">EXISTING-NAME NEW-NAME</code> <code>)</code> </h4> <i class="type">generic</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:ADD-EQUIVALENT-NAME">add-equivalent-name</a></code></p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:ADD-EXTERNAL-FUNCTION"> </a> <article> <header class="generic">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AADD-EXTERNAL-FUNCTION">ADD-EXTERNAL-FUNCTION</a> </code> <code class="qualifiers"></code> <code class="arguments">NAME IN-ARGS UNIFORMS CODE &amp;OPTIONAL VALID-GLSL-VERSIONS</code> <code>)</code> </h4> <i class="type">generic</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:ADD-EXTERNAL-FUNCTION">add-external-function</a></code> is a function that takes the following:</p> <ul> <li>a name as a symbol</li> <li>a list of input parameters declartions in the form: <code>(,name ,type-spec ,@qualifiers)</code></li> <li>a list of uniforms in the form: <code>(,name ,type-spec ,@qualifiers)</code></li> <li>a list of forms that make up the body of the function</li> <li>[optional] as list of glsl versions this function is valid for.
         nil means it is valid for all versions</li> </ul> <p>After doing basic checks on the arguments the function will be added to the
'external function registry' such that it call be called from any future
compilation task (assuming appropriate glsl versions).</p> <p>Please note that this function does not attempt to validate the body of the
function as doing so would require knowledge of the context in which it is
used. If you need to test that the function could be valid, refer to the <code><a href="#VARJO.API:TEST-TRANSLATE-FUNCTION-SPLIT-DETAILS">test-translate-function-split-details</a></code> function.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:ADD-LISP-FORM-AS-UNIFORM"> </a> <article> <header class="generic">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AADD-LISP-FORM-AS-UNIFORM">ADD-LISP-FORM-AS-UNIFORM</a> </code> <code class="qualifiers"></code> <code class="arguments">FORM TYPE-SPEC ENV &amp;OPTIONAL NAME</code> <code>)</code> </h4> <i class="type">generic</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:ADD-LISP-FORM-AS-UNIFORM">add-lisp-form-as-uniform</a></code> is an intersting beast. Its goal it to make it easy
to inject uniforms into the resulting GLSL which will be populated by the
result of a specific Common Lisp form.</p> <p>You provide:
- a value which will be assumed to be a valid Common lisp form
- a Vari <code>type-spec</code> which will be the type of the uniform
- a Varjo environment object, which must have been obtained from the <code> &amp;environment</code> paramater in a Vari macro.
- an optional name</p> <p>Varjo will then add a uniform (as it would be using uniform list in <code><a href="#VARJO.API:MAKE-STAGE">make-stage</a></code>). You can then use the symbol provided as the 'name' argument
in your Vari code.</p> <p>When the compilation completes you can query the <code><a href="#VARJO.API:COMPILED-STAGE">compiled-stage</a></code> object using
the <code><a href="#VARJO.API:IMPLICIT-UNIFORMS">implicit-uniforms</a></code> function which will return a list of <code><a href="#VARJO.API:IMPLICIT-UNIFORM-VARIABLE">implicit-uniform-variable</a></code> objects which can be queried using the following
functions:</p> <ul> <li><code><a href="#VARJO.API:NAME">name</a></code> - the vari name of the uniform</li> <li><code><a href="#VARJO.API:GLSL-NAME">glsl-name</a></code> - returns a string with the glsl name of the uniform variable</li> <li><code><a href="#VARJO.API:V-TYPE-OF">v-type-of</a></code> - Returns the Varjo type object</li> <li><code><a href="#VARJO.API:CPU-SIDE-TRANSFORM">cpu-side-transform</a></code> - this is how you obtain the Common Lisp code that
                     was passed to <code><a href="#VARJO.API:ADD-LISP-FORM-AS-UNIFORM">add-lisp-form-as-uniform</a></code></li> </ul> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:ALL-BOUND-SYMBOLS"> </a> <article> <header class="generic">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AALL-BOUND-SYMBOLS">ALL-BOUND-SYMBOLS</a> </code> <code class="qualifiers"></code> <code class="arguments">ENV</code> <code>)</code> </h4> <i class="type">generic</i>  </header> <div class="docstring"><p>When given an <code>environment</code> object from a Vari macro <code><a href="#VARJO.API:ALL-BOUND-SYMBOLS">all-bound-symbols</a></code> returns a list of all the symbols currently bound.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:ARGUMENT-IS-UNIFORM-P"> </a> <article> <header class="generic">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AARGUMENT-IS-UNIFORM-P">ARGUMENT-IS-UNIFORM-P</a> </code> <code class="qualifiers"></code> <code class="arguments">NAME ENV</code> <code>)</code> </h4> <i class="type">generic</i>  </header> <div class="docstring"><p>When given an <code>environment</code> object from a Vari macro and a symbol that names
one of the arguments to the compiler-macro, <code><a href="#VARJO.API:ARGUMENT-IS-UNIFORM-P">argument-is-uniform-p</a></code> returns T
if the value of the argument comes from a uniform variable.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:ARGUMENT-TYPE"> </a> <article> <header class="generic">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AARGUMENT-TYPE">ARGUMENT-TYPE</a> </code> <code class="qualifiers"></code> <code class="arguments">NAME ENV</code> <code>)</code> </h4> <i class="type">generic</i>  </header> <div class="docstring"><p>When given an <code>environment</code> object from a Vari macro and a symbol that names
a variable bound in the current scope, <code><a href="#VARJO.API:ARGUMENT-TYPE">argument-type</a></code> returns the Varjo
type object that represents the Vari type of that variable.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:ARGUMENT-UNIFORM-NAME"> </a> <article> <header class="generic">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AARGUMENT-UNIFORM-NAME">ARGUMENT-UNIFORM-NAME</a> </code> <code class="qualifiers"></code> <code class="arguments">NAME ENV</code> <code>)</code> </h4> <i class="type">generic</i>  </header> <div class="docstring"><p>When given an <code>environment</code> object from a Vari macro and a symbol that names
an argument to the current compiler-macro, <code><a href="#VARJO.API:ARGUMENT-UNIFORM-NAME">argument-uniform-name</a></code> returns
the the symbol which names the uniform in the stage if the value passed to
the named paramater has come from a uniform.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:BLOCK-NAME-STRING"> </a> <article> <header class="generic">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3ABLOCK-NAME-STRING">BLOCK-NAME-STRING</a> </code> <code class="qualifiers"></code> <code class="arguments">BLOCK-NAME</code> <code>)</code> </h4> <i class="type">generic</i>  </header> <div class="docstring"><p>When passed an instance of <code>output-variable</code> this will return the name of
the interface-block that contained the variable as a string.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:COMBINE-METADATA"> </a> <article> <header class="generic">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3ACOMBINE-METADATA">COMBINE-METADATA</a> </code> <code class="qualifiers"></code> <code class="arguments">META-A META-B</code> <code>)</code> </h4> <i class="type">generic</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:COMBINE-METADATA">combine-metadata</a></code> takes 2 metadata (or null) objects and attempts to combine
them if possible. It is valid for the system to return nil for non-null
arguments.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:CORE-TYPEP"> </a> <article> <header class="generic">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3ACORE-TYPEP">CORE-TYPEP</a> </code> <code class="qualifiers"></code> <code class="arguments">OBJECT</code> <code>)</code> </h4> <i class="type">generic</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:CORE-TYPEP">core-typep</a></code> returns T if the Varjo type object provided is a core GLSL type</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:CPU-SIDE-TRANSFORM"> </a> <article> <header class="generic">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3ACPU-SIDE-TRANSFORM">CPU-SIDE-TRANSFORM</a> </code> <code class="qualifiers"></code> <code class="arguments">OBJECT</code> <code>)</code> </h4> <i class="type">generic</i>  </header> <div class="docstring"><p>When passed an instance of <code><a href="#VARJO.API:IMPLICIT-UNIFORM-VARIABLE">implicit-uniform-variable</a></code> this returns the lisp
code that was to be used to populate the implicit uniform.</p> <p>See <code><a href="#VARJO.API:ADD-LISP-FORM-AS-UNIFORM">add-lisp-form-as-uniform</a></code> for more details.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:DELETE-EXTERNAL-FUNCTION"> </a> <article> <header class="generic">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3ADELETE-EXTERNAL-FUNCTION">DELETE-EXTERNAL-FUNCTION</a> </code> <code class="qualifiers"></code> <code class="arguments">NAME IN-ARGS-TYPES</code> <code>)</code> </h4> <i class="type">generic</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:DELETE-EXTERNAL-FUNCTION">delete-external-function</a></code> removes a function from the 'external function
registry' such that any attempt to use it in a functure compilation task will
fail.</p> <p>The 'in-arg-types' parameter expects a list of Vari <code>type-spec</code>s.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:FEEDBACK-GROUP"> </a> <article> <header class="generic">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AFEEDBACK-GROUP">FEEDBACK-GROUP</a> </code> <code class="qualifiers"></code> <code class="arguments">OBJECT</code> <code>)</code> </h4> <i class="type">generic</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:FEEDBACK-GROUP">feedback-group</a></code> given an instance of <code><a href="#VARJO.API:FEEDBACK-QUALIFIER">feedback-qualifier</a></code> this function
returns the group ID from the qualifier.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:LISP-NAME"> </a> <article> <header class="generic">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3ALISP-NAME">LISP-NAME</a> </code> <code class="qualifiers"></code> <code class="arguments">OBJECT</code> <code>)</code> </h4> <i class="type">generic</i>  </header> <div class="docstring"><p>When passed an instance of <code>primitive</code> this function returns the keyword
name of the primitive. This is the name one would pass to functions like <code><a href="#VARJO.API:MAKE-STAGE">make-stage</a></code>.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:LOCATION"> </a> <article> <header class="generic">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3ALOCATION">LOCATION</a> </code> <code class="qualifiers"></code> <code class="arguments">OBJECT</code> <code>)</code> </h4> <i class="type">generic</i>  </header> <div class="docstring"><p>When called with an instance of <code>output-variable</code> this returns the location[0]
of the variable. These will only be populated from <code>output-variable</code>s from a <code><a href="#VARJO.API:FRAGMENT-STAGE">fragment-stage</a></code>.</p> <blockquote> <p><code>[0]</code> For info on the fragment output locations please see:
      https://www.khronos.org/opengl/wiki/Fragment_Shader#Output_buffers</p> </blockquote> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:METADATA-FOR-ARGUMENT"> </a> <article> <header class="generic">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AMETADATA-FOR-ARGUMENT">METADATA-FOR-ARGUMENT</a> </code> <code class="qualifiers"></code> <code class="arguments">NAME METADATA-KEY ENV</code> <code>)</code> </h4> <i class="type">generic</i>  </header> <div class="docstring"><p>When given an <code>environment</code> object from a Vari compiler-macro and a symbol
that names one of the arguments to the macro[0], <code><a href="#VARJO.API:METADATA-FOR-ARGUMENT">metadata-for-argument</a></code> returns an object that holds the compile time metadata for the value</p> <p>[0] the argument cannot be the &amp;whole or &amp;environment argument.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:METADATA-FOR-VARIABLE"> </a> <article> <header class="generic">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AMETADATA-FOR-VARIABLE">METADATA-FOR-VARIABLE</a> </code> <code class="qualifiers"></code> <code class="arguments">NAME METADATA-KEY ENV</code> <code>)</code> </h4> <i class="type">generic</i>  </header> <div class="docstring"><p>When given an <code>environment</code> object from a Vari compiler-macro and a symbol
that names a variable currently in scope to the macro[0], <code><a href="#VARJO.API:METADATA-FOR-VARIABLE">metadata-for-variable</a></code> returns an object that holds the compile time metadata
for the value bound to that variable.</p> <p>[0] the argument cannot be the &amp;whole or &amp;environment argument.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:NAME"> </a> <article> <header class="generic">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3ANAME">NAME</a> </code> <code class="qualifiers"></code> <code class="arguments">OBJ</code> <code>)</code> </h4> <i class="type">generic</i>  </header> <div class="docstring"><p>When passed an instance of <code>qualfiier</code> <code>shader-variable or</code>external-function`
the function returns the name of the qualfiier/variable/function respectively.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:QUALIFIERS"> </a> <article> <header class="generic">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AQUALIFIERS">QUALIFIERS</a> </code> <code class="qualifiers"></code> <code class="arguments">OBJ</code> <code>)</code> </h4> <i class="type">generic</i>  </header> <div class="docstring"><p>When passed an instance of <code><a href="#VARJO.API:SHADER-VARIABLE">shader-variable</a></code> or Varjo type object this function
returns a list of any qualifiers that apply to the value (of the variable or
the value to which the type applies)</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:TRANSLATE"> </a> <article> <header class="generic">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3ATRANSLATE">TRANSLATE</a> </code> <code class="qualifiers"></code> <code class="arguments">STAGE</code> <code>)</code> </h4> <i class="type">generic</i>  </header> <div class="docstring"><p>When called with an instance of <code>stage</code> <code><a href="#VARJO.API:TRANSLATE">translate</a></code> compiles it, returning
an instance of <code><a href="#VARJO.API:COMPILED-STAGE">compiled-stage</a></code></p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:TYPE-&gt;TYPE-SPEC"> </a> <article> <header class="generic">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3ATYPE-%3ETYPE-SPEC">TYPE-&gt;TYPE-SPEC</a> </code> <code class="qualifiers"></code> <code class="arguments">TYPE</code> <code>)</code> </h4> <i class="type">generic</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:TYPE-&gt;TYPE-SPEC">type-&gt;type-spec</a></code> takes a Varjo type object and returns a Vari <code>type-spec</code>.</p> <p>As (during compilation) type objects can carry metadata that may not be
representable in a <code>type-spec</code> this conversion can be 'lossy'.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:TYPE-SPEC-&gt;TYPE"> </a> <article> <header class="generic">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3ATYPE-SPEC-%3ETYPE">TYPE-SPEC-&gt;TYPE</a> </code> <code class="qualifiers"></code> <code class="arguments">SPEC &amp;OPTIONAL FLOW-ID</code> <code>)</code> </h4> <i class="type">generic</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:TYPE-SPEC-&gt;TYPE">type-spec-&gt;type</a></code> takes a Vari <code>type-spec</code> and returns a new instance of
Varjo type object that represents it.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:V-CASTS-TO"> </a> <article> <header class="generic">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AV-CASTS-TO">V-CASTS-TO</a> </code> <code class="qualifiers"></code> <code class="arguments">FROM-TYPE TO-TYPE</code> <code>)</code> </h4> <i class="type">generic</i>  </header> <div class="docstring"><p>The poorly names <code><a href="#VARJO.API:V-CASTS-TO">v-casts-to</a></code> takes 2 Varjo type objects and attempts to cast
one to the other. If successful it returns the new type object and otherwise
returns NIL.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:V-CASTS-TO-P"> </a> <article> <header class="generic">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AV-CASTS-TO-P">V-CASTS-TO-P</a> </code> <code class="qualifiers"></code> <code class="arguments">FROM-TYPE TO-TYPE</code> <code>)</code> </h4> <i class="type">generic</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:V-CASTS-TO-P">v-casts-to-p</a></code> returns T if the first Varjo type object could be cast to the second</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:V-ELEMENT-TYPE"> </a> <article> <header class="generic">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AV-ELEMENT-TYPE">V-ELEMENT-TYPE</a> </code> <code class="qualifiers"></code> <code class="arguments">OBJECT</code> <code>)</code> </h4> <i class="type">generic</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:V-ELEMENT-TYPE">v-element-type</a></code> given an instance of the <code>v-container</code> type object this returns the
type object of it elements.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:V-GLSL-SIZE"> </a> <article> <header class="generic">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AV-GLSL-SIZE">V-GLSL-SIZE</a> </code> <code class="qualifiers"></code> <code class="arguments">TYPE</code> <code>)</code> </h4> <i class="type">generic</i>  </header> <div class="docstring"><p>Given a Varjo type object this function will return it's 'glsl size'. By this
we mean the number of 'positions' the value would take up (for example when
being passed into a <code><a href="#VARJO.API:VERTEX-STAGE">vertex-stage</a></code>)</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:V-SPECIAL-FUNCTIONP"> </a> <article> <header class="generic">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AV-SPECIAL-FUNCTIONP">V-SPECIAL-FUNCTIONP</a> </code> <code class="qualifiers"></code> <code class="arguments">FUNC</code> <code>)</code> </h4> <i class="type">generic</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:V-SPECIAL-FUNCTIONP">v-special-functionp</a></code> returns T if the Varjo function object provided is a
special form.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:V-TYPE-EQ"> </a> <article> <header class="generic">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AV-TYPE-EQ">V-TYPE-EQ</a> </code> <code class="qualifiers"></code> <code class="arguments">A B</code> <code>)</code> </h4> <i class="type">generic</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:V-TYPE-EQ">v-type-eq</a></code> returns T if the Varjo type object provided represents the given
Vari type.</p> <p>The second argument can be a Varjo type object or a Vari <code>type-spec</code></p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:V-TYPEP"> </a> <article> <header class="generic">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AV-TYPEP">V-TYPEP</a> </code> <code class="qualifiers"></code> <code class="arguments">A B</code> <code>)</code> </h4> <i class="type">generic</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:V-TYPEP">v-typep</a></code> returns T if the Varjo type object provided represents the given
Vari type or a subtype of that type.</p> <p>The second argument can be a Varjo type object or a Vari <code>type-spec</code></p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:VARIABLE-IN-SCOPE-P"> </a> <article> <header class="generic">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AVARIABLE-IN-SCOPE-P">VARIABLE-IN-SCOPE-P</a> </code> <code class="qualifiers"></code> <code class="arguments">NAME ENV</code> <code>)</code> </h4> <i class="type">generic</i>  </header> <div class="docstring"><p>When given an <code>environment</code> object from a Vari compiler-macro and a symbol, <code><a href="#VARJO.API:VARIABLE-IN-SCOPE-P">variable-in-scope-p</a></code> returns T if that symbol names a variable that is
currently in scope.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:VARIABLE-IS-UNIFORM-P"> </a> <article> <header class="generic">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AVARIABLE-IS-UNIFORM-P">VARIABLE-IS-UNIFORM-P</a> </code> <code class="qualifiers"></code> <code class="arguments">NAME ENV</code> <code>)</code> </h4> <i class="type">generic</i>  </header> <div class="docstring"><p>When given an <code>environment</code> object from a Vari macro and a symbol, <code><a href="#VARJO.API:VARIABLE-IS-UNIFORM-P">variable-is-uniform-p</a></code> returns T if that symbol names a uniform variable
in the current scope, or it contains the value from a uniform variable.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:VARIABLE-TYPE"> </a> <article> <header class="generic">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AVARIABLE-TYPE">VARIABLE-TYPE</a> </code> <code class="qualifiers"></code> <code class="arguments">NAME ENV</code> <code>)</code> </h4> <i class="type">generic</i>  </header> <div class="docstring"><p>When given an <code>environment</code> object from a Vari macro and a symbol that names
a variable in the current scope, <code><a href="#VARJO.API:VARIABLE-TYPE">variable-type</a></code> returns a Varjo type object
that represents the Vari type of the value bound to the variable.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:VARIABLE-UNIFORM-NAME"> </a> <article> <header class="generic">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AVARIABLE-UNIFORM-NAME">VARIABLE-UNIFORM-NAME</a> </code> <code class="qualifiers"></code> <code class="arguments">NAME ENV</code> <code>)</code> </h4> <i class="type">generic</i>  </header> <div class="docstring"><p>When given an <code>environment</code> object from a Vari macro and a symbol that names
a variable whos value is taken from a uniform, <code><a href="#VARJO.API:ARGUMENT-UNIFORM-NAME">argument-uniform-name</a></code> returns
the the symbol which names the uniform in the stage.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:VARIABLES-IN-SCOPE"> </a> <article> <header class="generic">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AVARIABLES-IN-SCOPE">VARIABLES-IN-SCOPE</a> </code> <code class="qualifiers"></code> <code class="arguments">ENV</code> <code>)</code> </h4> <i class="type">generic</i>  </header> <div class="docstring"><p>When given an <code>environment</code> object from a Vari macro, <code><a href="#VARJO.API:VARIABLES-IN-SCOPE">variables-in-scope</a></code> returns a list contains the names of all the variables currently in scope.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:VERTEX-COUNT"> </a> <article> <header class="generic">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AVERTEX-COUNT">VERTEX-COUNT</a> </code> <code class="qualifiers"></code> <code class="arguments">OBJECT</code> <code>)</code> </h4> <i class="type">generic</i>  </header> <div class="docstring"><p>When passed an instance of <code>primitive</code> this function returns the number
of vertices that make up this kind of primitive.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:DEF-METADATA-INFER"> </a> <article> <header class="macro">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3ADEF-METADATA-INFER">DEF-METADATA-INFER</a> </code> <code class="qualifiers"></code> <code class="arguments">VARJO-TYPE-SPEC METADATA-KIND ENV-VAR &amp;BODY BODY</code> <code>)</code> </h4> <i class="type">macro</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:DEF-METADATA-INFER">def-metadata-infer</a></code> is the older syntax for <code><a href="#VARJO.API:DEFINE-METADATA-INFER">define-metadata-infer</a></code>.</p> <p>This macro is still exported in order to maintain compatibility with existing
code.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:DEF-METADATA-KIND"> </a> <article> <header class="macro">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3ADEF-METADATA-KIND">DEF-METADATA-KIND</a> </code> <code class="qualifiers"></code> <code class="arguments">NAME (&amp;KEY CONC-NAME (BINDS-TO :VALUE)) &amp;BODY SLOT-NAMES</code> <code>)</code> </h4> <i class="type">macro</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:DEF-METADATA-KIND">def-metadata-kind</a></code> is the older syntax for <code><a href="#VARJO.API:DEFINE-METADATA-KIND">define-metadata-kind</a></code>.</p> <p>This macro is still exported in order to maintain compatibility with existing
code.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:DEF-SHADOW-TYPE-CONSTRUCTOR"> </a> <article> <header class="macro">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3ADEF-SHADOW-TYPE-CONSTRUCTOR">DEF-SHADOW-TYPE-CONSTRUCTOR</a> </code> <code class="qualifiers"></code> <code class="arguments">SHADOW-TYPE FUNCTION-IDENTIFIER</code> <code>)</code> </h4> <i class="type">macro</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:DEF-SHADOW-TYPE-CONSTRUCTOR">def-shadow-type-constructor</a></code> is the older syntax for <code><a href="#VARJO.API:DEFINE-SHADOW-TYPE-CONSTRUCTOR">define-shadow-type-constructor</a></code>.</p> <p>This macro is still exported in order to maintain compatibility with existing
code.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:DEFINE-ALTERNATE-TYPE-NAME"> </a> <article> <header class="macro">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3ADEFINE-ALTERNATE-TYPE-NAME">DEFINE-ALTERNATE-TYPE-NAME</a> </code> <code class="qualifiers"></code> <code class="arguments">CURRENT-TYPE-NAME ALTERNATE-TYPE-NAME</code> <code>)</code> </h4> <i class="type">macro</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:DEFINE-ALTERNATE-TYPE-NAME">define-alternate-type-name</a></code> lets you define</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:DEFINE-GLSL-TEMPLATE-FUNCTION"> </a> <article> <header class="macro">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3ADEFINE-GLSL-TEMPLATE-FUNCTION">DEFINE-GLSL-TEMPLATE-FUNCTION</a> </code> <code class="qualifiers"></code> <code class="arguments">NAME ARGS RETURN-SPEC TRANSFORM &amp;KEY PURE</code> <code>)</code> </h4> <i class="type">macro</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:DEFINE-GLSL-TEMPLATE-FUNCTION">define-glsl-template-function</a></code> which lets you define a snippet of
glsl code as a function in Vari. Here is an example definition:</p> <pre><code>                               [0]
                                â
(<a href="#VARJO.API:DEFINE-GLSL-TEMPLATE-FUNCTION">define-glsl-template-function</a> my-func ((x :float)) â[1]
  :float â[2]
  &quot;(1.0f / ~a)&quot; â[3]
  :pure t) â[4]
</code></pre> <p><code>[0]</code> Here we are defining a function called 'my-func'</p> <p><code>[1]</code> It takes 1 argument, called 'x' which has the type <code>:float</code></p> <p><code>[2]</code> It returns a single <code>:float</code> value</p> <p><code>[3]</code> The string pattern is what will be injected into the final glsl. It
      behaves as though this pattern and the glsl for the arguments were
      passed to <code><a href="http://l1sp.org/cl/format">format</a></code>, e.g. <code>(<a href="http://l1sp.org/cl/format">format</a> nil &quot;(1.0f / ~a)&quot; &quot;2.3f&quot;) assuming
      the glsl of the argument passed to</code>x` was &quot;2.3f&quot;.</p> <pre><code>  The glsl for the arguments is passed to format in the order specified
  in `[1]`

  As it currently uses `format` it is legal to use other `directives` such
  as `~s` but it is not advisable as this will result in invalid glsl.
</code></pre> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:DEFINE-METADATA-INFER"> </a> <article> <header class="macro">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3ADEFINE-METADATA-INFER">DEFINE-METADATA-INFER</a> </code> <code class="qualifiers"></code> <code class="arguments">VARJO-TYPE-SPEC METADATA-KIND ENV-VAR &amp;BODY BODY</code> <code>)</code> </h4> <i class="type">macro</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:DEFINE-METADATA-INFER">define-metadata-infer</a></code> lets you define</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:DEFINE-METADATA-KIND"> </a> <article> <header class="macro">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3ADEFINE-METADATA-KIND">DEFINE-METADATA-KIND</a> </code> <code class="qualifiers"></code> <code class="arguments">NAME (&amp;KEY CONC-NAME (BINDS-TO :VALUE)) &amp;BODY SLOT-NAMES</code> <code>)</code> </h4> <i class="type">macro</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:DEFINE-METADATA-KIND">define-metadata-kind</a></code> lets you define</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:DEFINE-SHADOW-TYPE-CONSTRUCTOR"> </a> <article> <header class="macro">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3ADEFINE-SHADOW-TYPE-CONSTRUCTOR">DEFINE-SHADOW-TYPE-CONSTRUCTOR</a> </code> <code class="qualifiers"></code> <code class="arguments">SHADOW-TYPE FUNCTION-IDENTIFIER</code> <code>)</code> </h4> <i class="type">macro</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:DEFINE-SHADOW-TYPE-CONSTRUCTOR">define-shadow-type-constructor</a></code> lets you define</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:DEFINE-VARI-COMPILER-MACRO"> </a> <article> <header class="macro">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3ADEFINE-VARI-COMPILER-MACRO">DEFINE-VARI-COMPILER-MACRO</a> </code> <code class="qualifiers"></code> <code class="arguments">NAME LAMBDA-LIST &amp;BODY BODY</code> <code>)</code> </h4> <i class="type">macro</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:DEFINE-VARI-COMPILER-MACRO">define-vari-compiler-macro</a></code> lets you define a compiler-macro that works in
Vari.</p> <p>The parameters in the lambda-list must be defined in form <code>(,name ,type-spec)</code></p> <p>The compiler macro will only expand for functions with an exactly matching name
and lambda-list.</p> <p>Vari's compiler macros behave the same as regular Common Lisp compiler-macros
with the exception that you can make queries against the environment to find
data (such as type) from the arguments (See <a href="">here</a> for details).</p> <p>Due to having to compile the argument forms before being able to identify the
compiler macro, any form returned from the compiler-macro (other than the value
from <code><a href="http://l1sp.org/cl/&amp;whole">&amp;whole</a></code> is going to result in recompilation. This make Vari's compiler
macros more 'expensive' than Common Lisps in the general sense.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:DEFINE-VARI-FUNCTION"> </a> <article> <header class="macro">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3ADEFINE-VARI-FUNCTION">DEFINE-VARI-FUNCTION</a> </code> <code class="qualifiers"></code> <code class="arguments">NAME ARGS &amp;BODY BODY</code> <code>)</code> </h4> <i class="type">macro</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:DEFINE-VARI-FUNCTION">define-vari-function</a></code> lets you define a function that can be used in
any Vari code compiled in the future.</p> <p>that takes the following:</p> <ul> <li>a name as a symbol</li> <li>a 'vari function lambda-list' (see <a href="">here</a> for details)</li> <li>a body made of Vari code</li> </ul> <p>Please note that, other than performing some basic validation on the arguments,
this function does not attempt any validation on the body of the function.
Doing so would require knowledge of the context in which it is used.</p> <p>If you need to test that the function could be valid, refer to the <code><a href="#VARJO.API:TEST-TRANSLATE-FUNCTION-SPLIT-DETAILS">test-translate-function-split-details</a></code> &amp; <code><a href="#VARJO.API:ADD-EXTERNAL-FUNCTION">add-external-function</a></code> functions.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:DEFINE-VARI-MACRO"> </a> <article> <header class="macro">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3ADEFINE-VARI-MACRO">DEFINE-VARI-MACRO</a> </code> <code class="qualifiers"></code> <code class="arguments">NAME LAMBDA-LIST &amp;BODY BODY</code> <code>)</code> </h4> <i class="type">macro</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:DEFINE-VARI-MACRO">define-vari-macro</a></code> lets you define a macro that can be used in any Vari code
compiled in the future.</p> <p>Vari's macros behave the same as regular Common Lisp macros with the
exception that you can make queries against the environment to find
data (such as type) from the arguments (See <a href="">here</a> for details).</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:DEFINE-VARI-STRUCT"> </a> <article> <header class="macro">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3ADEFINE-VARI-STRUCT">DEFINE-VARI-STRUCT</a> </code> <code class="qualifiers"></code> <code class="arguments">NAME CONTEXT &amp;BODY SLOTS</code> <code>)</code> </h4> <i class="type">macro</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:DEFINE-VARI-STRUCT">define-vari-struct</a></code> lets you define</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:DEFINE-VARI-TYPE"> </a> <article> <header class="macro">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3ADEFINE-VARI-TYPE">DEFINE-VARI-TYPE</a> </code> <code class="qualifiers"></code> <code class="arguments">NAME ARGS TYPE-FORM &amp;KEY VALID-METADATA-KINDS</code> <code>)</code> </h4> <i class="type">macro</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:DEFINE-VARI-TYPE">define-vari-type</a></code> lets you define</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:V-DEF-GLSL-TEMPLATE-FUN"> </a> <article> <header class="macro">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AV-DEF-GLSL-TEMPLATE-FUN">V-DEF-GLSL-TEMPLATE-FUN</a> </code> <code class="qualifiers"></code> <code class="arguments">NAME ARGS TRANSFORM ARG-TYPES RETURN-SPEC &amp;KEY V-PLACE-INDEX GLSL-NAME PURE</code> <code>)</code> </h4> <i class="type">macro</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:V-DEF-GLSL-TEMPLATE-FUN">v-def-glsl-template-fun</a></code> is the older syntax for <code><a href="#VARJO.API:DEFINE-GLSL-TEMPLATE-FUNCTION">define-glsl-template-function</a></code>.</p> <p>This macro is still exported in order to maintain compatibility with existing
code.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:V-DEFINE-COMPILER-MACRO"> </a> <article> <header class="macro">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AV-DEFINE-COMPILER-MACRO">V-DEFINE-COMPILER-MACRO</a> </code> <code class="qualifiers"></code> <code class="arguments">NAME LAMBDA-LIST &amp;BODY BODY</code> <code>)</code> </h4> <i class="type">macro</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:V-DEFINE-COMPILER-MACRO">v-define-compiler-macro</a></code> is the older syntax for <code><a href="#VARJO.API:DEFINE-VARI-COMPILER-MACRO">define-vari-compiler-macro</a></code>.</p> <p>This macro is still exported in order to maintain compatibility with existing
code.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:V-DEFMACRO"> </a> <article> <header class="macro">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AV-DEFMACRO">V-DEFMACRO</a> </code> <code class="qualifiers"></code> <code class="arguments">NAME LAMBDA-LIST &amp;BODY BODY</code> <code>)</code> </h4> <i class="type">macro</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:V-DEFMACRO">v-defmacro</a></code> is the older syntax for <code><a href="#VARJO.API:DEFINE-VARI-MACRO">define-vari-macro</a></code>.</p> <p>This macro is still exported in order to maintain compatibility with existing
code.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:V-DEFSTRUCT"> </a> <article> <header class="macro">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AV-DEFSTRUCT">V-DEFSTRUCT</a> </code> <code class="qualifiers"></code> <code class="arguments">NAME CONTEXT &amp;BODY SLOTS</code> <code>)</code> </h4> <i class="type">macro</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:V-DEFSTRUCT">v-defstruct</a></code> is the older syntax for <code><a href="#VARJO.API:DEFINE-VARI-STRUCT">define-vari-struct</a></code>.</p> <p>This macro is still exported in order to maintain compatibility with existing
code.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:V-DEFTYPE"> </a> <article> <header class="macro">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AV-DEFTYPE">V-DEFTYPE</a> </code> <code class="qualifiers"></code> <code class="arguments">NAME ARGS TYPE-FORM &amp;KEY VALID-METADATA-KINDS</code> <code>)</code> </h4> <i class="type">macro</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:V-DEFTYPE">v-deftype</a></code> is the older syntax for <code><a href="#VARJO.API:DEFINE-VARI-TYPE">define-vari-type</a></code>.</p> <p>This macro is still exported in order to maintain compatibility with existing
code.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:V-DEFUN"> </a> <article> <header class="macro">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AV-DEFUN">V-DEFUN</a> </code> <code class="qualifiers"></code> <code class="arguments">NAME ARGS &amp;BODY BODY</code> <code>)</code> </h4> <i class="type">macro</i>  </header> <div class="docstring"><p><code><a href="#VARJO.API:V-DEFUN">v-defun</a></code> is the older syntax for <code><a href="#VARJO.API:DEFINE-VARI-FUNCTION">define-vari-function</a></code>.</p> <p>This macro is still exported in order to maintain compatibility with existing
code.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:WITH-CONSTANT-INJECT-HOOK"> </a> <article> <header class="macro">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AWITH-CONSTANT-INJECT-HOOK">WITH-CONSTANT-INJECT-HOOK</a> </code> <code class="qualifiers"></code> <code class="arguments">FUNC &amp;BODY BODY</code> <code>)</code> </h4> <i class="type">macro</i>  </header> <div class="docstring"><p>When <code><a href="#VARJO.API:TRANSLATE">translate</a></code> is called within the dynamic extern of the body of this form,
if there is a use of a variable which is not in scope in the Vari code, but
is <code><a href="http://l1sp.org/cl/boundp">boundp</a></code> &amp; constant in the Common Lisp environment then the user
provided  function will be called with the symbol naming the variable.
The user provided function must  return a Vari type-spec or throw an error to
inform the user of the issue.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:WITH-STEMCELL-INFER-HOOK"> </a> <article> <header class="macro">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AWITH-STEMCELL-INFER-HOOK">WITH-STEMCELL-INFER-HOOK</a> </code> <code class="qualifiers"></code> <code class="arguments">FUNC &amp;BODY BODY</code> <code>)</code> </h4> <i class="type">macro</i>  </header> <div class="docstring"><p>When <code><a href="#VARJO.API:TRANSLATE">translate</a></code> is called within the dynamic extern of the body of this form,
if there is a use of a variable which is not in scope in the Vari code, but
is <code><a href="http://l1sp.org/cl/boundp">boundp</a></code> &amp; not constant in the Common Lisp environment then the user
provided  function will be called with the symbol naming the variable.
The user provided function must  return a Vari type-spec or throw an error to
inform the user of the issue.</p> </div> </article> </li><li style="list-style-type: none"> <a name="VARJO.API:WITH-UNKNOWN-FIRST-CLASS-FUNCTIONS-ALLOWED"> </a> <article> <header class="macro">  <h4 class="name"> <code>(</code> <code> <a href="#VARJO.API%3AWITH-UNKNOWN-FIRST-CLASS-FUNCTIONS-ALLOWED">WITH-UNKNOWN-FIRST-CLASS-FUNCTIONS-ALLOWED</a> </code> <code class="qualifiers"></code> <code class="arguments">&amp;BODY BODY</code> <code>)</code> </h4> <i class="type">macro</i>  </header> <div class="docstring"><p>When <code><a href="#VARJO.API:TRANSLATE">translate</a></code> is called within the dynamic extern of the body of this form,
it will not throw an error if there is a use of <code><a href="http://l1sp.org/cl/function">function</a></code> with an unknown
function name/signature. In the event of such a use the compiler will generate
a dummy function to satify the typechecker.</p> <p>This is only useful for testing and the resulting GLSL will (most likely) not
be legal</p> </div> </article> </li></ul> </li></ul> </article>  </div> </body> </html> 